<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.effect.ColorAdjust?>

<AnchorPane prefHeight="850.0" prefWidth="1200.0" style="-fx-background-color: #F4F6FC;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.PaymentsController">
   <children>
      <!-- Sidebar -->
      <AnchorPane id="sidebar" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="0.0" prefWidth="250.0" style="-fx-background-color: #F4F6FC;">
         <children>
            <!-- Logo -->
            <HBox alignment="CENTER_LEFT" layoutX="20.0" layoutY="30.0" spacing="8.0">
               <children>
                  <ImageView fitHeight="40.0" fitWidth="96.0" pickOnBounds="true" preserveRatio="true">
                     <image>
                        <Image url="@../images/logo.jpg" />
                     </image>
                  </ImageView>
               </children>
            </HBox>
            <Text fill="#5a0bb4" fontSmoothingType="LCD" layoutX="79.0" layoutY="59.0" strokeType="OUTSIDE" strokeWidth="0.0" text="DORPAY">
               <font>
                  <Font name="System Bold" size="24.0" />
               </font>
            </Text>
            
            <!-- Navigation Menu -->
            <VBox layoutX="20.0" layoutY="100.0" spacing="8.0">
               <children>
                  <Button fx:id="dashboardBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handleDashboard" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Dashboard">
                     <graphic>
                        <SVGPath content="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" fill="#7B76F1" />
                     </graphic>
                  </Button>
                  <Button fx:id="schoolYearsBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handleSchoolYears" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="School Years">
                     <graphic>
                        <SVGPath content="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z" fill="#7B76F1" />
                     </graphic>
                  </Button>
                  <Button fx:id="studentsBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handleStudents" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Students">
                     <graphic>
                        <SVGPath content="M16 7c0-2.21-1.79-4-4-4S8 4.79 8 7s1.79 4 4 4 4-1.79 4-4zm-4 6c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#7B76F1" />
                     </graphic>
                  </Button>
                  <Button fx:id="payablesBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handlePayables" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Payables">
                     <graphic>
                        <SVGPath content="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" fill="#7B76F1" />
                     </graphic>
                  </Button>
                  <Button fx:id="paymentsBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handlePayments" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: #7B76F1; -fx-text-fill: white; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Payments">
                     <graphic>
                        <SVGPath content="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 1.99 2H18c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" fill="white" />
                     </graphic>
                  </Button>
                  <Button fx:id="promissoryNotesBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handlePromissoryNotes" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Promissory Notes">
                     <graphic>
                        <SVGPath content="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" fill="#7B76F1" />
                     </graphic>
                  </Button>
               </children>
            </VBox>
            
            <!-- Bottom Buttons -->
            <VBox layoutX="20.0" spacing="8.0" AnchorPane.bottomAnchor="30.0">
               <children>
                  <Button fx:id="settingsBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handleSettings" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #333; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Settings">
                     <graphic>
                        <SVGPath content="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" fill="#7B76F1" />
                     </graphic>
                  </Button>
                  <Button fx:id="logoutBtn" alignment="CENTER_LEFT" contentDisplay="LEFT" onAction="#handleLogout" prefHeight="42.0" prefWidth="210.0" style="-fx-background-color: transparent; -fx-text-fill: #FF0000; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-size: 14; -fx-padding: 0 0 0 15;" text="Logout">
                     <graphic>
                        <SVGPath content="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" fill="#FF0000" />
                     </graphic>
                  </Button>
               </children>
            </VBox>
         </children>
      </AnchorPane>
      
      <!-- Main Content -->
      <AnchorPane style="-fx-background-color: #F4F6FC;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="250.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" spacing="20.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="25.0">
               <children>
                  <Text strokeType="OUTSIDE" strokeWidth="0.0" text="Payments">
                     <font>
                        <Font name="System Bold" size="28.0" />
                     </font>
                  </Text>
                  <ComboBox fx:id="yearComboBoxHeader" prefHeight="36.0" prefWidth="140.0" promptText="Select Year" style="-fx-background-color: white; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1; -fx-font-size: 12; -fx-text-fill: #333; -fx-prompt-text-fill: #999;" />
                  <HBox spacing="10.0" style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 8 12;">
                     <children>
                        <Label style="-fx-font-size: 12;" text="Semester:" textFill="#666">
                           <font>
                              <Font size="12.0" />
                           </font>
                        </Label>
                        <ComboBox fx:id="semesterComboBoxHeader" minWidth="140.0" prefHeight="32.0" prefWidth="140.0" promptText="Select Semester" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1; -fx-font-size: 12; -fx-text-fill: #333; -fx-prompt-text-fill: #999;" />
                     </children>
                  </HBox>
               </children>
            </HBox>
            
            <!-- Search and Filter -->
            <VBox spacing="8.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="80.0">
               <children>
                  <HBox spacing="15.0">
                     <children>
                        <VBox spacing="3.0" HBox.hgrow="ALWAYS">
                           <children>
                              <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Search" />
                              <TextField fx:id="searchField" maxHeight="36.0" maxWidth="1.7976931348623157E308" minHeight="36.0" minWidth="120.0" onKeyReleased="#handleSearch" prefHeight="36.0" promptText="Search Student" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: text;" VBox.vgrow="NEVER" />
                           </children>
                        </VBox>
                        <VBox spacing="3.0" HBox.hgrow="ALWAYS">
                           <children>
                              <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Year" />
                              <ComboBox fx:id="yearFilterCombo" maxHeight="36.0" maxWidth="1.7976931348623157E308" minHeight="36.0" minWidth="120.0" onAction="#handleSearch" prefHeight="36.0" promptText="Select Year" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: hand;" VBox.vgrow="NEVER" />
                           </children>
                        </VBox>
                        <VBox spacing="3.0" HBox.hgrow="ALWAYS">
                           <children>
                              <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Program" />
                              <ComboBox fx:id="majorFilterCombo" maxHeight="36.0" maxWidth="1.7976931348623157E308" minHeight="36.0" minWidth="120.0" onAction="#handleSearch" prefHeight="36.0" promptText="Select Program" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: hand;" VBox.vgrow="NEVER" />
                           </children>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Main Content Area - Split between Table and Form -->
            <VBox spacing="20.0" AnchorPane.bottomAnchor="20.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="150.0">
               <children>
                  <!-- Latest Payments Table -->
                  <VBox spacing="10.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20;" VBox.vgrow="ALWAYS">
                     <children>
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                           <children>
                              <Text strokeType="OUTSIDE" strokeWidth="0.0" text="Latest Payments">
                                 <font>
                                    <Font name="System Bold" size="16.0" />
                                 </font>
                              </Text>
                           </children>
                        </HBox>
                        <TableView fx:id="paymentsTable" maxWidth="1.7976931348623157E308" onMouseClicked="#handleTableClick" VBox.vgrow="ALWAYS">
                           <columnResizePolicy>
                              <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                           </columnResizePolicy>
                           <columns>
                              <TableColumn fx:id="studentIdCol" minWidth="100.0" prefWidth="150.0" text="Student ID" />
                              <TableColumn fx:id="studentNameCol" minWidth="150.0" prefWidth="250.0" text="Student Name" />
                              <TableColumn fx:id="semesterAmountCol" minWidth="150.0" prefWidth="200.0" text="Payables per Sem (1st Semester)" />
                              <TableColumn fx:id="amountPaidCol" minWidth="120.0" prefWidth="150.0" text="Amount Paid" />
                              <TableColumn fx:id="dueDateCol" minWidth="100.0" prefWidth="130.0" text="Due Date" />
                              <TableColumn fx:id="statusCol" minWidth="80.0" prefWidth="120.0" text="Status" />
                           </columns>
                        </TableView>
                        <!-- Pagination Controls -->
                        <HBox alignment="CENTER" spacing="15.0" style="-fx-padding: 15 0 10 0;">
                           <children>
                              <Button fx:id="prevBtn" onAction="#handlePrevPage" prefHeight="32.0" prefWidth="80.0" style="-fx-background-color: #7B76F1; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-size: 12;" text="Previous" />
                              <Text fx:id="pageInfoLabel" strokeType="OUTSIDE" strokeWidth="0.0" style="-fx-font-size: 14; -fx-text-fill: #333;" text="Page 1 of 1">
                                 <font>
                                    <Font size="14.0" />
                                 </font>
                              </Text>
                              <Button fx:id="nextBtn" onAction="#handleNextPage" prefHeight="32.0" prefWidth="80.0" style="-fx-background-color: #7B76F1; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-size: 12;" text="Next" />
                           </children>
                        </HBox>
                     </children>
                  </VBox>
                  
                  <!-- Payment Information Form -->
                  <VBox spacing="12.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 18;" VBox.vgrow="NEVER">
               <children>
                  <Text strokeType="OUTSIDE" strokeWidth="0.0" text="Payment Information">
                     <font>
                        <Font name="System Bold" size="15.0" />
                     </font>
                  </Text>
                        <GridPane hgap="10.0" maxWidth="1.7976931348623157E308" vgap="10.0">
                           <columnConstraints>
                              <ColumnConstraints hgrow="ALWAYS" minWidth="150.0" />
                              <ColumnConstraints hgrow="ALWAYS" minWidth="150.0" />
                              <ColumnConstraints hgrow="ALWAYS" minWidth="150.0" />
                              <ColumnConstraints hgrow="ALWAYS" minWidth="150.0" />
                              <ColumnConstraints hgrow="ALWAYS" minWidth="150.0" />
                           </columnConstraints>
                           <rowConstraints>
                              <RowConstraints minHeight="60.0" prefHeight="60.0" />
                              <RowConstraints minHeight="10.0" prefHeight="10.0" />
                              <RowConstraints minHeight="60.0" prefHeight="60.0" />
                           </rowConstraints>
                           <children>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" GridPane.fillWidth="true">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Student ID" />
                                    <TextField fx:id="studentIdField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Student ID" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="1" GridPane.hgrow="ALWAYS" GridPane.fillWidth="true">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Full Name" />
                                    <TextField fx:id="fullnameField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Full Name" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="2" GridPane.hgrow="ALWAYS" GridPane.fillWidth="true">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Program" />
                                    <TextField fx:id="majorField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Program" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="3" GridPane.hgrow="ALWAYS" GridPane.fillWidth="true">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Year" />
                                    <TextField fx:id="yearField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Year" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <HBox alignment="CENTER_LEFT" spacing="10.0" GridPane.columnIndex="0" GridPane.columnSpan="5" GridPane.rowIndex="1">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Payment Mode:" />
                                    <RadioButton fx:id="addModeRadio" onAction="#handleModeChange" selected="true" style="-fx-font-size: 12; -fx-text-fill: #666;" text="Add More" />
                                    <RadioButton fx:id="updateModeRadio" onAction="#handleModeChange" style="-fx-font-size: 12; -fx-text-fill: #666;" text="Set Total" />
                                 </children>
                              </HBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2">
                                 <children>
                                    <Label fx:id="amountLabel" style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Amount to Add" />
                                    <TextField fx:id="amountPaidField" maxWidth="1.7976931348623157E308" onKeyReleased="#handleAmountPaidChange" prefHeight="36.0" promptText="Enter amount" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: text;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="1" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Payables" />
                                    <TextField fx:id="payablesField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Payables" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="2" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Total Amount Paid" />
                                    <TextField fx:id="totalPaidField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Total Amount Paid" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="3" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Due Date" />
                                    <TextField fx:id="dueDateField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Due Date" style="-fx-background-color: #F8F9FA; -fx-border-color: #E0E0E0; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #333; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                              <VBox maxWidth="1.7976931348623157E308" spacing="3.0" GridPane.columnIndex="4" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2">
                                 <children>
                                    <Label style="-fx-font-size: 12; -fx-text-fill: #666; -fx-font-weight: bold;" text="Balance to Pay" />
                                    <TextField fx:id="balanceToPayField" editable="false" maxWidth="1.7976931348623157E308" prefHeight="36.0" promptText="Balance to Pay" style="-fx-background-color: #FFF3E0; -fx-border-color: #FF9800; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-font-size: 14; -fx-text-fill: #E65100; -fx-font-weight: bold; -fx-prompt-text-fill: #999; -fx-cursor: default;" VBox.vgrow="ALWAYS" />
                                 </children>
                              </VBox>
                           </children>
                        </GridPane>
                        
                        <!-- Actions -->
                        <HBox alignment="CENTER_LEFT" spacing="8.0" style="-fx-padding: 10 0 0 0;">
                           <children>
                              <Button fx:id="saveBtn" onAction="#handleSave" prefHeight="48.0" prefWidth="110.0" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-size: 12; -fx-font-weight: bold;" text="Save Payment" />
                              <Button fx:id="deleteBtn" onAction="#handleDelete" prefHeight="48.0" prefWidth="90.0" style="-fx-background-color: #F44336; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-size: 12; -fx-font-weight: bold;" text="Delete" />
                              <Button fx:id="clearBtn" onAction="#handleClear" prefHeight="48.0" prefWidth="90.0" style="-fx-background-color: #757575; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-size: 12; -fx-font-weight: bold;" text="Clear" />
                           </children>
                        </HBox>
                     </children>
                  </VBox>
               </children>
            </VBox>
         </children>
      </AnchorPane>
   </children>
</AnchorPane>
